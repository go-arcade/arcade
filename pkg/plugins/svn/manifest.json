{
  "name": "svn",
  "version": "1.0.0",
  "description": "SVN 版本控制插件，支持检出、更新、状态查询、提交历史等操作，适用于 CI/CD 流程中的代码仓库管理",
  "author": "Arcade Team <support@go-arcade.io>",
  "homepage": "https://github.com/go-arcade/arcade",
  "repository": "https://github.com/go-arcade/arcade",
  "pluginType": "source",
  "entryPoint": "svn",
  "dependencies": [],
  "configSchema": {
    "type": "object",
    "properties": {
      "svn_path": {
        "type": "string",
        "description": "SVN 可执行文件的路径",
        "default": "svn",
        "examples": ["svn", "/usr/bin/svn", "/usr/local/bin/svn"]
      },
      "timeout": {
        "type": "integer",
        "description": "操作超时时间（秒），0 表示无限制",
        "default": 300,
        "minimum": 0
      },
      "work_dir": {
        "type": "string",
        "description": "默认工作目录",
        "default": ""
      },
      "username": {
        "type": "string",
        "description": "默认用户名（用于认证）",
        "default": ""
      },
      "password": {
        "type": "string",
        "description": "默认密码（用于认证）",
        "default": ""
      },
      "trust_server_cert": {
        "type": "boolean",
        "description": "是否信任服务器证书",
        "default": false
      },
      "non_interactive": {
        "type": "boolean",
        "description": "非交互模式",
        "default": true
      }
    },
    "required": []
  },
  "actionsSchema": {
    "checkout": {
      "description": "检出（克隆）SVN 仓库",
      "args": {
        "type": "object",
        "properties": {
          "repo": {
            "type": "string",
            "description": "仓库 URL",
            "examples": [
              "https://svn.example.com/repo/trunk",
              "svn://svn.example.com/repo/trunk",
              "http://svn.example.com/repo/branches/develop"
            ]
          },
          "path": {
            "type": "string",
            "description": "目标路径（可选，默认为仓库名称）"
          },
          "revision": {
            "type": "string",
            "description": "要检出的版本号（可选，默认为 HEAD）",
            "examples": ["HEAD", "1234", "r1234"]
          },
          "depth": {
            "type": "string",
            "description": "检出深度",
            "enum": ["empty", "files", "immediates", "infinity"],
            "default": "infinity"
          },
          "auth": {
            "type": "object",
            "description": "认证信息",
            "properties": {
              "username": {
                "type": "string",
                "description": "用户名"
              },
              "password": {
                "type": "string",
                "description": "密码"
              }
            }
          },
          "env": {
            "type": "object",
            "description": "额外的环境变量",
            "additionalProperties": {
              "type": "string"
            }
          }
        },
        "required": ["repo"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "stdout": {
            "type": "string",
            "description": "标准输出"
          },
          "stderr": {
            "type": "string",
            "description": "标准错误"
          },
          "exit_code": {
            "type": "integer",
            "description": "退出代码"
          },
          "duration_ms": {
            "type": "integer",
            "description": "执行时长（毫秒）"
          },
          "success": {
            "type": "boolean",
            "description": "是否执行成功"
          },
          "path": {
            "type": "string",
            "description": "检出后的路径"
          },
          "error": {
            "type": "string",
            "description": "错误信息（如果有）"
          }
        }
      }
    },
    "update": {
      "description": "更新工作副本",
      "args": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "工作副本路径（必需）"
          },
          "revision": {
            "type": "string",
            "description": "要更新到的版本号（可选，默认为 HEAD）",
            "examples": ["HEAD", "1234", "r1234"]
          },
          "depth": {
            "type": "string",
            "description": "更新深度",
            "enum": ["empty", "files", "immediates", "infinity"]
          },
          "auth": {
            "type": "object",
            "description": "认证信息",
            "properties": {
              "username": {
                "type": "string",
                "description": "用户名"
              },
              "password": {
                "type": "string",
                "description": "密码"
              }
            }
          },
          "env": {
            "type": "object",
            "description": "额外的环境变量",
            "additionalProperties": {
              "type": "string"
            }
          }
        },
        "required": ["path"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "stdout": {"type": "string"},
          "stderr": {"type": "string"},
          "exit_code": {"type": "integer"},
          "duration_ms": {"type": "integer"},
          "success": {"type": "boolean"},
          "error": {"type": "string"}
        }
      }
    },
    "status": {
      "description": "查看工作副本状态",
      "args": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "工作副本路径（必需）"
          },
          "verbose": {
            "type": "boolean",
            "description": "详细输出",
            "default": false
          },
          "show_updates": {
            "type": "boolean",
            "description": "显示更新信息",
            "default": false
          },
          "env": {
            "type": "object",
            "description": "额外的环境变量",
            "additionalProperties": {
              "type": "string"
            }
          }
        },
        "required": ["path"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "stdout": {"type": "string"},
          "stderr": {"type": "string"},
          "exit_code": {"type": "integer"},
          "duration_ms": {"type": "integer"},
          "success": {"type": "boolean"},
          "error": {"type": "string"}
        }
      }
    },
    "log": {
      "description": "查看提交历史",
      "args": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "工作副本路径或 URL（必需）"
          },
          "revision": {
            "type": "string",
            "description": "版本范围（可选，例如 r1:r100）",
            "examples": ["r1:r100", "r100:r200", "HEAD"]
          },
          "limit": {
            "type": "integer",
            "description": "限制条目数量",
            "minimum": 1
          },
          "verbose": {
            "type": "boolean",
            "description": "详细输出",
            "default": false
          },
          "auth": {
            "type": "object",
            "description": "认证信息",
            "properties": {
              "username": {
                "type": "string",
                "description": "用户名"
              },
              "password": {
                "type": "string",
                "description": "密码"
              }
            }
          },
          "env": {
            "type": "object",
            "description": "额外的环境变量",
            "additionalProperties": {
              "type": "string"
            }
          }
        },
        "required": ["path"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "stdout": {"type": "string"},
          "stderr": {"type": "string"},
          "exit_code": {"type": "integer"},
          "duration_ms": {"type": "integer"},
          "success": {"type": "boolean"},
          "error": {"type": "string"}
        }
      }
    },
    "info": {
      "description": "查看仓库信息",
      "args": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "工作副本路径或 URL（必需）"
          },
          "revision": {
            "type": "string",
            "description": "版本号（可选）",
            "examples": ["HEAD", "1234", "r1234"]
          },
          "auth": {
            "type": "object",
            "description": "认证信息",
            "properties": {
              "username": {
                "type": "string",
                "description": "用户名"
              },
              "password": {
                "type": "string",
                "description": "密码"
              }
            }
          },
          "env": {
            "type": "object",
            "description": "额外的环境变量",
            "additionalProperties": {
              "type": "string"
            }
          }
        },
        "required": ["path"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "stdout": {"type": "string"},
          "stderr": {"type": "string"},
          "exit_code": {"type": "integer"},
          "duration_ms": {"type": "integer"},
          "success": {"type": "boolean"},
          "error": {"type": "string"}
        }
      }
    },
    "list": {
      "description": "列出目录内容",
      "args": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "工作副本路径或 URL（必需）"
          },
          "revision": {
            "type": "string",
            "description": "版本号（可选）",
            "examples": ["HEAD", "1234", "r1234"]
          },
          "recursive": {
            "type": "boolean",
            "description": "递归列出",
            "default": false
          },
          "auth": {
            "type": "object",
            "description": "认证信息",
            "properties": {
              "username": {
                "type": "string",
                "description": "用户名"
              },
              "password": {
                "type": "string",
                "description": "密码"
              }
            }
          },
          "env": {
            "type": "object",
            "description": "额外的环境变量",
            "additionalProperties": {
              "type": "string"
            }
          }
        },
        "required": ["path"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "stdout": {"type": "string"},
          "stderr": {"type": "string"},
          "exit_code": {"type": "integer"},
          "duration_ms": {"type": "integer"},
          "success": {
            "type": "boolean",
            "description": "是否执行成功"
          },
          "error": {
            "type": "string",
            "description": "错误信息（如果有）"
          }
        }
      }
    }
  },
  "icon": "https://cdn.example.com/icons/svn.png",
  "tags": ["svn", "version-control", "source", "scm", "repository"],
  "minVersion": "1.0.0",
  "resources": {
    "cpu": "100m",
    "memory": "128Mi",
    "disk": "100Mi"
  },
  "examples": [
    {
      "name": "检出仓库",
      "description": "检出 SVN 仓库到指定目录",
      "config": {},
      "action": "checkout",
      "args": {
        "repo": "https://svn.example.com/repo/trunk",
        "path": "/workspace/repo",
        "revision": "HEAD"
      }
    },
    {
      "name": "更新工作副本",
      "description": "更新工作副本到最新版本",
      "config": {},
      "action": "update",
      "args": {
        "path": "/workspace/repo",
        "revision": "HEAD"
      }
    },
    {
      "name": "查看状态",
      "description": "查看工作副本的当前状态",
      "config": {},
      "action": "status",
      "args": {
        "path": "/workspace/repo",
        "verbose": true
      }
    },
    {
      "name": "查看提交历史",
      "description": "查看最近的提交历史",
      "config": {},
      "action": "log",
      "args": {
        "path": "/workspace/repo",
        "limit": 10
      }
    },
    {
      "name": "查看仓库信息",
      "description": "查看仓库的详细信息",
      "config": {},
      "action": "info",
      "args": {
        "path": "/workspace/repo"
      }
    }
  ],
  "security": {
    "capabilities": ["exec", "file_read", "file_write", "network"],
    "recommendations": [
      "确保 SVN 可执行文件路径安全",
      "使用安全的认证方式（推荐使用访问令牌）",
      "不要在配置中硬编码敏感信息（密码等）",
      "限制插件只能访问特定目录",
      "为操作设置合理的超时时间",
      "谨慎使用 trust_server_cert 选项"
    ]
  }
}
